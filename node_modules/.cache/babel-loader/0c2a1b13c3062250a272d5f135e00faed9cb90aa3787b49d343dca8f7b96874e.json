{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport InternalIcon from '../../icon/internal';\nimport Tooltip from '../../internal/components/tooltip';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { getEventDetail } from '../utils';\nimport { FunnelBreadcrumbItem } from './funnel';\nimport styles from './styles.css.js';\nconst BreadcrumbItemWithPopover = _a => {\n  var {\n      item,\n      isLast,\n      anchorAttributes\n    } = _a,\n    itemAttributes = __rest(_a, [\"item\", \"isLast\", \"anchorAttributes\"]);\n  const [showPopover, setShowPopover] = useState(false);\n  const textRef = useRef(null);\n  const virtualTextRef = useRef(null);\n  const isTruncated = (textRef, virtualTextRef) => {\n    if (!textRef || !virtualTextRef || !textRef.current || !virtualTextRef.current) {\n      return false;\n    }\n    const virtualTextWidth = virtualTextRef.current.getBoundingClientRect().width;\n    const textWidth = textRef.current.getBoundingClientRect().width;\n    if (virtualTextWidth > textWidth) {\n      return true;\n    }\n    return false;\n  };\n  const popoverContent = React.createElement(Tooltip, {\n    trackRef: textRef,\n    value: item.text\n  });\n  useEffect(() => {\n    const onKeyDown = event => {\n      if (event.key === 'Escape') {\n        setShowPopover(false);\n      }\n    };\n    if (showPopover) {\n      document.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [showPopover]);\n  return React.createElement(React.Fragment, null, React.createElement(Item, Object.assign({\n    isLast: isLast\n  }, itemAttributes, {\n    onFocus: () => {\n      isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n    },\n    onBlur: () => setShowPopover(false),\n    onMouseEnter: () => {\n      isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n    },\n    onMouseLeave: () => setShowPopover(false),\n    anchorAttributes: anchorAttributes\n  }), React.createElement(FunnelBreadcrumbItem, {\n    ref: textRef,\n    text: item.text,\n    last: isLast\n  }), React.createElement(\"span\", {\n    className: styles['virtual-item'],\n    ref: virtualTextRef\n  }, item.text)), showPopover && popoverContent);\n};\nconst Item = _a => {\n  var {\n      anchorAttributes,\n      children,\n      isLast\n    } = _a,\n    itemAttributes = __rest(_a, [\"anchorAttributes\", \"children\", \"isLast\"]);\n  return isLast ? React.createElement(\"span\", Object.assign({}, itemAttributes), children) : React.createElement(\"a\", Object.assign({}, itemAttributes, anchorAttributes), children);\n};\nexport function BreadcrumbItem(_ref) {\n  let {\n    item,\n    onClick,\n    onFollow,\n    isDisplayed,\n    isLast = false,\n    isCompressed = false\n  } = _ref;\n  const preventDefault = event => event.preventDefault();\n  const onClickHandler = event => {\n    if (isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, getEventDetail(item), event);\n    }\n    fireCancelableEvent(onClick, getEventDetail(item), event);\n  };\n  const itemAttributes = {\n    className: clsx(styles.anchor, {\n      [styles.compressed]: isCompressed\n    })\n  };\n  const anchorAttributes = {\n    href: item.href || '#',\n    onClick: isLast ? preventDefault : onClickHandler\n  };\n  return React.createElement(\"div\", {\n    className: clsx(styles.breadcrumb, isLast && styles.last)\n  }, isDisplayed && isCompressed ? React.createElement(BreadcrumbItemWithPopover, Object.assign({\n    item: item,\n    isLast: isLast,\n    anchorAttributes: anchorAttributes\n  }, itemAttributes)) : React.createElement(Item, Object.assign({\n    isLast: isLast,\n    anchorAttributes: anchorAttributes\n  }, itemAttributes), React.createElement(FunnelBreadcrumbItem, {\n    text: item.text,\n    last: isLast\n  })), !isLast ? React.createElement(\"span\", {\n    className: styles.icon\n  }, React.createElement(InternalIcon, {\n    name: \"angle-right\"\n  })) : null);\n}","map":{"version":3,"names":["React","useEffect","useRef","useState","clsx","InternalIcon","Tooltip","fireCancelableEvent","isPlainLeftClick","getEventDetail","FunnelBreadcrumbItem","styles","BreadcrumbItemWithPopover","_a","item","isLast","anchorAttributes","itemAttributes","__rest","showPopover","setShowPopover","textRef","virtualTextRef","isTruncated","current","virtualTextWidth","getBoundingClientRect","width","textWidth","popoverContent","createElement","trackRef","value","text","onKeyDown","event","key","document","addEventListener","removeEventListener","Fragment","Item","Object","assign","onFocus","onBlur","onMouseEnter","onMouseLeave","ref","last","className","children","BreadcrumbItem","_ref","onClick","onFollow","isDisplayed","isCompressed","preventDefault","onClickHandler","anchor","compressed","href","breadcrumb","icon","name"],"sources":["/home/jj/aws-threat-model-app/node_modules/src/breadcrumb-group/item/item.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\n\nimport InternalIcon from '../../icon/internal';\nimport Tooltip from '../../internal/components/tooltip';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { BreadcrumbGroupProps, BreadcrumbItemProps } from '../interfaces';\nimport { getEventDetail } from '../utils';\nimport { FunnelBreadcrumbItem } from './funnel';\n\nimport styles from './styles.css.js';\n\ntype BreadcrumbItemWithPopoverProps<T extends BreadcrumbGroupProps.Item> = React.HTMLAttributes<HTMLElement> & {\n  item: T;\n  isLast: boolean;\n  anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement>;\n};\n\nconst BreadcrumbItemWithPopover = <T extends BreadcrumbGroupProps.Item>({\n  item,\n  isLast,\n  anchorAttributes,\n  ...itemAttributes\n}: BreadcrumbItemWithPopoverProps<T>) => {\n  const [showPopover, setShowPopover] = useState(false);\n  const textRef = useRef<HTMLElement>(null);\n  const virtualTextRef = useRef<HTMLElement>(null);\n\n  const isTruncated = (textRef: React.RefObject<HTMLElement>, virtualTextRef: React.RefObject<HTMLElement>) => {\n    if (!textRef || !virtualTextRef || !textRef.current || !virtualTextRef.current) {\n      return false;\n    }\n    const virtualTextWidth = virtualTextRef.current.getBoundingClientRect().width;\n    const textWidth = textRef.current.getBoundingClientRect().width;\n    if (virtualTextWidth > textWidth) {\n      return true;\n    }\n    return false;\n  };\n\n  const popoverContent = <Tooltip trackRef={textRef} value={item.text} />;\n\n  useEffect(() => {\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setShowPopover(false);\n      }\n    };\n    if (showPopover) {\n      document.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [showPopover]);\n\n  return (\n    <>\n      <Item\n        isLast={isLast}\n        {...itemAttributes}\n        onFocus={() => {\n          isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n        }}\n        onBlur={() => setShowPopover(false)}\n        onMouseEnter={() => {\n          isTruncated(textRef, virtualTextRef) && setShowPopover(true);\n        }}\n        onMouseLeave={() => setShowPopover(false)}\n        anchorAttributes={anchorAttributes}\n      >\n        <FunnelBreadcrumbItem ref={textRef} text={item.text} last={isLast} />\n        <span className={styles['virtual-item']} ref={virtualTextRef}>\n          {item.text}\n        </span>\n      </Item>\n      {showPopover && popoverContent}\n    </>\n  );\n};\n\ntype ItemProps = React.HTMLAttributes<HTMLElement> & {\n  anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement>;\n  isLast: boolean;\n};\nconst Item = ({ anchorAttributes, children, isLast, ...itemAttributes }: ItemProps) =>\n  isLast ? (\n    <span {...itemAttributes}>{children}</span>\n  ) : (\n    <a {...itemAttributes} {...anchorAttributes}>\n      {children}\n    </a>\n  );\n\nexport function BreadcrumbItem<T extends BreadcrumbGroupProps.Item>({\n  item,\n  onClick,\n  onFollow,\n  isDisplayed,\n  isLast = false,\n  isCompressed = false,\n}: BreadcrumbItemProps<T>) {\n  const preventDefault = (event: React.MouseEvent) => event.preventDefault();\n  const onClickHandler = (event: React.MouseEvent) => {\n    if (isPlainLeftClick(event)) {\n      fireCancelableEvent(onFollow, getEventDetail(item), event);\n    }\n    fireCancelableEvent(onClick, getEventDetail(item), event);\n  };\n\n  const itemAttributes: React.HTMLAttributes<HTMLElement> = {\n    className: clsx(styles.anchor, { [styles.compressed]: isCompressed }),\n  };\n  const anchorAttributes: React.AnchorHTMLAttributes<HTMLAnchorElement> = {\n    href: item.href || '#',\n    onClick: isLast ? preventDefault : onClickHandler,\n  };\n\n  return (\n    <div className={clsx(styles.breadcrumb, isLast && styles.last)}>\n      {isDisplayed && isCompressed ? (\n        <BreadcrumbItemWithPopover\n          item={item}\n          isLast={isLast}\n          anchorAttributes={anchorAttributes}\n          {...itemAttributes}\n        />\n      ) : (\n        <Item isLast={isLast} anchorAttributes={anchorAttributes} {...itemAttributes}>\n          <FunnelBreadcrumbItem text={item.text} last={isLast} />\n        </Item>\n      )}\n      {!isLast ? (\n        <span className={styles.icon}>\n          <InternalIcon name=\"angle-right\" />\n        </span>\n      ) : null}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}