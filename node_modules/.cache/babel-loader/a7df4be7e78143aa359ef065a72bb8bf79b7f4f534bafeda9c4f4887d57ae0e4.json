{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useImperativeHandle, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\nimport { InternalButton } from '../button/internal';\nimport { getBaseProps } from '../internal/base-component';\nimport TokenList from '../internal/components/token-list';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useListFocusController } from '../internal/hooks/use-list-focus-controller';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useUniqueId } from '../internal/hooks/use-unique-id/index';\nimport { joinStrings } from '../internal/utils/strings';\nimport InternalSpaceBetween from '../space-between/internal';\nimport { SearchResults } from '../text-filter/search-results';\nimport { getAllowedOperators, getAutosuggestOptions, getQueryActions, parseText } from './controller';\nimport { usePropertyFilterI18n } from './i18n-utils';\nimport { PropertyEditor } from './property-editor';\nimport PropertyFilterAutosuggest from './property-filter-autosuggest';\nimport { TokenButton } from './token';\nimport { useLoadItems } from './use-load-items';\nimport tokenListStyles from '../internal/components/token-list/styles.css.js';\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\nconst PropertyFilterInternal = React.forwardRef((_a, ref) => {\n  var _b;\n  var {\n      disabled,\n      countText,\n      query,\n      hideOperations,\n      onChange,\n      filteringProperties,\n      filteringOptions,\n      customGroupsText,\n      disableFreeTextFiltering,\n      freeTextFiltering,\n      onLoadItems,\n      virtualScroll,\n      customControl,\n      customFilterActions,\n      filteringPlaceholder,\n      filteringAriaLabel,\n      filteringEmpty,\n      filteringLoadingText,\n      filteringFinishedText,\n      filteringErrorText,\n      filteringRecoveryText,\n      filteringConstraintText,\n      filteringStatusType,\n      asyncProperties,\n      tokenLimit,\n      expandToViewport,\n      tokenLimitShowFewerAriaLabel,\n      tokenLimitShowMoreAriaLabel,\n      enableTokenGroups = false,\n      i18nStringsTokenGroups,\n      __internalRootRef\n    } = _a,\n    rest = __rest(_a, [\"disabled\", \"countText\", \"query\", \"hideOperations\", \"onChange\", \"filteringProperties\", \"filteringOptions\", \"customGroupsText\", \"disableFreeTextFiltering\", \"freeTextFiltering\", \"onLoadItems\", \"virtualScroll\", \"customControl\", \"customFilterActions\", \"filteringPlaceholder\", \"filteringAriaLabel\", \"filteringEmpty\", \"filteringLoadingText\", \"filteringFinishedText\", \"filteringErrorText\", \"filteringRecoveryText\", \"filteringConstraintText\", \"filteringStatusType\", \"asyncProperties\", \"tokenLimit\", \"expandToViewport\", \"tokenLimitShowFewerAriaLabel\", \"tokenLimitShowMoreAriaLabel\", \"enableTokenGroups\", \"i18nStringsTokenGroups\", \"__internalRootRef\"]);\n  const [nextFocusIndex, setNextFocusIndex] = useState(null);\n  const onFocusMoved = () => setNextFocusIndex(null);\n  const tokenListRef = useListFocusController({\n    nextFocusIndex,\n    onFocusMoved,\n    listItemSelector: `.${tokenListStyles['list-item']}`,\n    showMoreSelector: `.${tokenListStyles.toggle}`,\n    outsideSelector: `.${styles.input}`\n  });\n  const mergedRef = useMergeRefs(tokenListRef, __internalRootRef);\n  const inputRef = useRef(null);\n  const baseProps = getBaseProps(rest);\n  const i18nStrings = usePropertyFilterI18n(Object.assign(Object.assign({}, rest.i18nStrings), i18nStringsTokenGroups));\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }), []);\n  const showResults = !!((_b = query.tokens) === null || _b === void 0 ? void 0 : _b.length) && !disabled && !!countText;\n  const [filteringText, setFilteringText] = useState('');\n  const {\n    internalProperties,\n    internalOptions,\n    internalQuery,\n    internalFreeText\n  } = (() => {\n    var _a, _b;\n    const propertyByKey = filteringProperties.reduce((acc, property) => {\n      var _a, _b, _c, _d, _e;\n      const extendedOperators = ((_a = property === null || property === void 0 ? void 0 : property.operators) !== null && _a !== void 0 ? _a : []).reduce((acc, operator) => typeof operator === 'object' ? acc.set(operator.operator, operator) : acc, new Map());\n      acc.set(property.key, {\n        propertyKey: property.key,\n        propertyLabel: (_b = property === null || property === void 0 ? void 0 : property.propertyLabel) !== null && _b !== void 0 ? _b : '',\n        groupValuesLabel: (_c = property === null || property === void 0 ? void 0 : property.groupValuesLabel) !== null && _c !== void 0 ? _c : '',\n        propertyGroup: property === null || property === void 0 ? void 0 : property.group,\n        operators: ((_d = property === null || property === void 0 ? void 0 : property.operators) !== null && _d !== void 0 ? _d : []).map(op => typeof op === 'string' ? op : op.operator),\n        defaultOperator: (_e = property === null || property === void 0 ? void 0 : property.defaultOperator) !== null && _e !== void 0 ? _e : '=',\n        getValueFormatter: operator => {\n          var _a, _b;\n          return operator ? (_b = (_a = extendedOperators.get(operator)) === null || _a === void 0 ? void 0 : _a.format) !== null && _b !== void 0 ? _b : null : null;\n        },\n        getValueFormRenderer: operator => {\n          var _a, _b;\n          return operator ? (_b = (_a = extendedOperators.get(operator)) === null || _a === void 0 ? void 0 : _a.form) !== null && _b !== void 0 ? _b : null : null;\n        },\n        externalProperty: property\n      });\n      return acc;\n    }, new Map());\n    const getProperty = propertyKey => {\n      var _a;\n      return (_a = propertyByKey.get(propertyKey)) !== null && _a !== void 0 ? _a : null;\n    };\n    const internalOptions = filteringOptions.map(option => {\n      var _a, _b;\n      return {\n        property: getProperty(option.propertyKey),\n        value: option.value,\n        label: (_b = (_a = option.label) !== null && _a !== void 0 ? _a : option.value) !== null && _b !== void 0 ? _b : ''\n      };\n    });\n    function transformToken(tokenOrGroup, standaloneIndex) {\n      return 'operation' in tokenOrGroup ? {\n        operation: tokenOrGroup.operation,\n        tokens: tokenOrGroup.tokens.map(token => transformToken(token))\n      } : {\n        standaloneIndex,\n        property: tokenOrGroup.propertyKey ? getProperty(tokenOrGroup.propertyKey) : null,\n        operator: tokenOrGroup.operator,\n        value: tokenOrGroup.value\n      };\n    }\n    const internalQuery = {\n      operation: query.operation,\n      tokens: (enableTokenGroups && query.tokenGroups ? query.tokenGroups : query.tokens).map(transformToken)\n    };\n    const internalFreeText = {\n      disabled: disableFreeTextFiltering,\n      operators: (_a = freeTextFiltering === null || freeTextFiltering === void 0 ? void 0 : freeTextFiltering.operators) !== null && _a !== void 0 ? _a : [':', '!:'],\n      defaultOperator: (_b = freeTextFiltering === null || freeTextFiltering === void 0 ? void 0 : freeTextFiltering.defaultOperator) !== null && _b !== void 0 ? _b : ':'\n    };\n    return {\n      internalProperties: [...propertyByKey.values()],\n      internalOptions,\n      internalQuery,\n      internalFreeText\n    };\n  })();\n  const {\n    addToken,\n    updateToken,\n    updateOperation,\n    removeToken,\n    removeAllTokens\n  } = getQueryActions({\n    query: internalQuery,\n    filteringOptions: internalOptions,\n    onChange,\n    enableTokenGroups\n  });\n  const parsedText = parseText(filteringText, internalProperties, internalFreeText);\n  const autosuggestOptions = getAutosuggestOptions(parsedText, internalProperties, internalOptions, customGroupsText, i18nStrings);\n  const createToken = currentText => {\n    const parsedText = parseText(currentText, internalProperties, internalFreeText);\n    let newToken;\n    switch (parsedText.step) {\n      case 'property':\n        {\n          newToken = {\n            property: parsedText.property,\n            operator: parsedText.operator,\n            value: parsedText.value\n          };\n          break;\n        }\n      case 'free-text':\n        {\n          newToken = {\n            property: null,\n            operator: parsedText.operator || internalFreeText.defaultOperator,\n            value: parsedText.value\n          };\n          break;\n        }\n      case 'operator':\n        {\n          newToken = {\n            property: null,\n            operator: internalFreeText.defaultOperator,\n            value: currentText\n          };\n          break;\n        }\n    }\n    if (internalFreeText.disabled && !newToken.property) {\n      return;\n    }\n    addToken(newToken);\n    setFilteringText('');\n  };\n  const getLoadMoreDetail = (parsedText, filteringText) => {\n    const loadMoreDetail = {\n      filteringProperty: undefined,\n      filteringText,\n      filteringOperator: undefined\n    };\n    if (parsedText.step === 'property') {\n      loadMoreDetail.filteringProperty = parsedText.property.externalProperty;\n      loadMoreDetail.filteringText = parsedText.value;\n      loadMoreDetail.filteringOperator = parsedText.operator;\n    }\n    return loadMoreDetail;\n  };\n  const loadMoreDetail = getLoadMoreDetail(parsedText, filteringText);\n  const inputLoadItemsHandlers = useLoadItems(onLoadItems, loadMoreDetail.filteringText, loadMoreDetail.filteringProperty, loadMoreDetail.filteringText, loadMoreDetail.filteringOperator);\n  const asyncProps = {\n    empty: filteringEmpty,\n    loadingText: filteringLoadingText,\n    finishedText: filteringFinishedText,\n    errorText: filteringErrorText,\n    recoveryText: filteringRecoveryText,\n    statusType: filteringStatusType\n  };\n  const asyncAutosuggestProps = !!filteringText.length || asyncProperties ? Object.assign(Object.assign({}, inputLoadItemsHandlers), asyncProps) : {};\n  const handleSelected = event => {\n    var _a;\n    const {\n      detail: option\n    } = event;\n    const value = option.value || '';\n    if (!value) {\n      return;\n    }\n    if (!('keepOpenOnSelect' in option)) {\n      createToken(value);\n      return;\n    }\n    // stop dropdown from closing\n    event.preventDefault();\n    const parsedText = parseText(value, internalProperties, internalFreeText);\n    const loadMoreDetail = getLoadMoreDetail(parsedText, value);\n    // Insert operator automatically if only one operator is defined for the given property.\n    if (parsedText.step === 'operator') {\n      const operators = getAllowedOperators(parsedText.property);\n      if (value.trim() === parsedText.property.propertyLabel && operators.length === 1) {\n        loadMoreDetail.filteringProperty = (_a = parsedText.property.externalProperty) !== null && _a !== void 0 ? _a : undefined;\n        loadMoreDetail.filteringOperator = operators[0];\n        loadMoreDetail.filteringText = '';\n        setFilteringText(parsedText.property.propertyLabel + ' ' + operators[0] + ' ');\n      }\n    }\n    fireNonCancelableEvent(onLoadItems, Object.assign(Object.assign({}, loadMoreDetail), {\n      firstPage: true,\n      samePage: false\n    }));\n  };\n  const operatorForm = parsedText.step === 'property' && parsedText.property.getValueFormRenderer(parsedText.operator);\n  const searchResultsId = useUniqueId('property-filter-search-results');\n  const constraintTextId = useUniqueId('property-filter-constraint');\n  const textboxAriaDescribedBy = filteringConstraintText ? joinStrings(rest.ariaDescribedby, constraintTextId) : rest.ariaDescribedby;\n  return React.createElement(\"div\", Object.assign({}, baseProps, {\n    className: clsx(baseProps.className, styles.root),\n    ref: mergedRef\n  }), React.createElement(\"div\", {\n    className: clsx(styles['search-field'], analyticsSelectors['search-field'])\n  }, customControl && React.createElement(\"div\", {\n    className: styles['custom-control']\n  }, customControl), React.createElement(PropertyFilterAutosuggest, Object.assign({\n    ref: inputRef,\n    virtualScroll: virtualScroll,\n    enteredTextLabel: i18nStrings.enteredTextLabel,\n    ariaLabel: filteringAriaLabel !== null && filteringAriaLabel !== void 0 ? filteringAriaLabel : i18nStrings.filteringAriaLabel,\n    placeholder: filteringPlaceholder !== null && filteringPlaceholder !== void 0 ? filteringPlaceholder : i18nStrings.filteringPlaceholder,\n    ariaLabelledby: rest.ariaLabelledby,\n    ariaDescribedby: textboxAriaDescribedBy,\n    controlId: rest.controlId,\n    value: filteringText,\n    disabled: disabled\n  }, autosuggestOptions, {\n    onChange: event => setFilteringText(event.detail.value),\n    empty: filteringEmpty\n  }, asyncAutosuggestProps, {\n    expandToViewport: expandToViewport,\n    onOptionClick: handleSelected,\n    customForm: operatorForm && React.createElement(PropertyEditor, {\n      property: parsedText.property,\n      operator: parsedText.operator,\n      filter: parsedText.value,\n      operatorForm: operatorForm,\n      i18nStrings: i18nStrings,\n      onCancel: () => {\n        var _a, _b;\n        setFilteringText('');\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.close();\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.focus({\n          preventDropdown: true\n        });\n      },\n      onSubmit: token => {\n        var _a, _b;\n        addToken(token);\n        setFilteringText('');\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus({\n          preventDropdown: true\n        });\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.close();\n      }\n    }),\n    hideEnteredTextOption: internalFreeText.disabled && parsedText.step !== 'property',\n    clearAriaLabel: i18nStrings.clearAriaLabel,\n    searchResultsId: showResults ? searchResultsId : undefined\n  })), showResults ? React.createElement(\"div\", {\n    className: styles.results\n  }, React.createElement(SearchResults, {\n    id: searchResultsId\n  }, countText)) : null), filteringConstraintText && React.createElement(\"div\", {\n    id: constraintTextId,\n    className: styles.constraint\n  }, filteringConstraintText), internalQuery.tokens && internalQuery.tokens.length > 0 && React.createElement(\"div\", {\n    className: styles.tokens\n  }, React.createElement(InternalSpaceBetween, {\n    size: \"xs\",\n    direction: \"horizontal\"\n  }, React.createElement(TokenList, {\n    alignment: \"inline\",\n    limit: tokenLimit,\n    items: internalQuery.tokens,\n    limitShowFewerAriaLabel: tokenLimitShowFewerAriaLabel,\n    limitShowMoreAriaLabel: tokenLimitShowMoreAriaLabel,\n    renderItem: (_, tokenIndex) => React.createElement(TokenButton, {\n      query: internalQuery,\n      tokenIndex: tokenIndex,\n      onUpdateToken: (token, releasedTokens) => {\n        updateToken(tokenIndex, token, releasedTokens);\n      },\n      onUpdateOperation: updateOperation,\n      onRemoveToken: () => {\n        removeToken(tokenIndex);\n        setNextFocusIndex(tokenIndex);\n      },\n      filteringProperties: internalProperties,\n      filteringOptions: internalOptions,\n      asyncProps: asyncProps,\n      onLoadItems: onLoadItems,\n      i18nStrings: i18nStrings,\n      asyncProperties: asyncProperties,\n      hideOperations: hideOperations,\n      customGroupsText: customGroupsText,\n      freeTextFiltering: internalFreeText,\n      disabled: disabled,\n      expandToViewport: expandToViewport,\n      enableTokenGroups: enableTokenGroups\n    }),\n    i18nStrings: {\n      limitShowFewer: i18nStrings.tokenLimitShowFewer,\n      limitShowMore: i18nStrings.tokenLimitShowMore\n    },\n    after: customFilterActions ? React.createElement(\"div\", {\n      className: styles['custom-filter-actions']\n    }, customFilterActions) : React.createElement(\"span\", Object.assign({}, getAnalyticsMetadataAttribute({\n      action: 'clearFilters'\n    })), React.createElement(InternalButton, {\n      formAction: \"none\",\n      onClick: () => {\n        var _a;\n        removeAllTokens();\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus({\n          preventDropdown: true\n        });\n      },\n      className: styles['remove-all'],\n      disabled: disabled\n    }, i18nStrings.clearFiltersText))\n  }))));\n});\nexport default PropertyFilterInternal;","map":{"version":3,"names":["React","useImperativeHandle","useRef","useState","clsx","getAnalyticsMetadataAttribute","InternalButton","getBaseProps","TokenList","fireNonCancelableEvent","useListFocusController","useMergeRefs","useUniqueId","joinStrings","InternalSpaceBetween","SearchResults","getAllowedOperators","getAutosuggestOptions","getQueryActions","parseText","usePropertyFilterI18n","PropertyEditor","PropertyFilterAutosuggest","TokenButton","useLoadItems","tokenListStyles","analyticsSelectors","styles","PropertyFilterInternal","forwardRef","_a","ref","disabled","countText","query","hideOperations","onChange","filteringProperties","filteringOptions","customGroupsText","disableFreeTextFiltering","freeTextFiltering","onLoadItems","virtualScroll","customControl","customFilterActions","filteringPlaceholder","filteringAriaLabel","filteringEmpty","filteringLoadingText","filteringFinishedText","filteringErrorText","filteringRecoveryText","filteringConstraintText","filteringStatusType","asyncProperties","tokenLimit","expandToViewport","tokenLimitShowFewerAriaLabel","tokenLimitShowMoreAriaLabel","enableTokenGroups","i18nStringsTokenGroups","__internalRootRef","rest","__rest","nextFocusIndex","setNextFocusIndex","onFocusMoved","tokenListRef","listItemSelector","showMoreSelector","toggle","outsideSelector","input","mergedRef","inputRef","baseProps","i18nStrings","Object","assign","focus","current","showResults","_b","tokens","length","filteringText","setFilteringText","internalProperties","internalOptions","internalQuery","internalFreeText","propertyByKey","reduce","acc","property","extendedOperators","operators","operator","set","Map","key","propertyKey","propertyLabel","groupValuesLabel","_c","propertyGroup","group","_d","map","op","defaultOperator","_e","getValueFormatter","get","format","getValueFormRenderer","form","externalProperty","getProperty","option","value","label","transformToken","tokenOrGroup","standaloneIndex","operation","token","tokenGroups","values","addToken","updateToken","updateOperation","removeToken","removeAllTokens","parsedText","autosuggestOptions","createToken","currentText","newToken","step","getLoadMoreDetail","loadMoreDetail","filteringProperty","undefined","filteringOperator","inputLoadItemsHandlers","asyncProps","empty","loadingText","finishedText","errorText","recoveryText","statusType","asyncAutosuggestProps","handleSelected","event","detail","preventDefault","trim","firstPage","samePage","operatorForm","searchResultsId","constraintTextId","textboxAriaDescribedBy","ariaDescribedby","createElement","className","root","enteredTextLabel","ariaLabel","placeholder","ariaLabelledby","controlId","onOptionClick","customForm","filter","onCancel","close","preventDropdown","onSubmit","hideEnteredTextOption","clearAriaLabel","results","id","constraint","size","direction","alignment","limit","items","limitShowFewerAriaLabel","limitShowMoreAriaLabel","renderItem","_","tokenIndex","onUpdateToken","releasedTokens","onUpdateOperation","onRemoveToken","limitShowFewer","tokenLimitShowFewer","limitShowMore","tokenLimitShowMore","after","action","formAction","onClick","clearFiltersText"],"sources":["/home/jj/aws-threat-model-app/node_modules/src/property-filter/internal.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useImperativeHandle, useRef, useState } from 'react';\nimport clsx from 'clsx';\n\nimport { PropertyFilterOperator } from '@cloudscape-design/collection-hooks';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport { InternalButton } from '../button/internal';\nimport { getBaseProps } from '../internal/base-component';\nimport { AutosuggestInputRef } from '../internal/components/autosuggest-input';\nimport TokenList from '../internal/components/token-list';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { useListFocusController } from '../internal/hooks/use-list-focus-controller';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useUniqueId } from '../internal/hooks/use-unique-id/index';\nimport { SomeRequired } from '../internal/types';\nimport { joinStrings } from '../internal/utils/strings';\nimport InternalSpaceBetween from '../space-between/internal';\nimport { SearchResults } from '../text-filter/search-results';\nimport { GeneratedAnalyticsMetadataPropertyFilterClearFilters } from './analytics-metadata/interfaces';\nimport { getAllowedOperators, getAutosuggestOptions, getQueryActions, parseText } from './controller';\nimport { usePropertyFilterI18n } from './i18n-utils';\nimport {\n  ComparisonOperator,\n  ExtendedOperator,\n  FilteringProperty,\n  I18nStringsTokenGroups,\n  InternalFilteringOption,\n  InternalFilteringProperty,\n  InternalFreeTextFiltering,\n  InternalQuery,\n  InternalToken,\n  InternalTokenGroup,\n  ParsedText,\n  PropertyFilterProps,\n  Ref,\n  Token,\n  TokenGroup,\n} from './interfaces';\nimport { PropertyEditor } from './property-editor';\nimport PropertyFilterAutosuggest, { PropertyFilterAutosuggestProps } from './property-filter-autosuggest';\nimport { TokenButton } from './token';\nimport { useLoadItems } from './use-load-items';\n\nimport tokenListStyles from '../internal/components/token-list/styles.css.js';\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\n\nexport type PropertyFilterInternalProps = SomeRequired<\n  PropertyFilterProps,\n  'filteringOptions' | 'customGroupsText' | 'disableFreeTextFiltering'\n> &\n  InternalBaseComponentProps & {\n    enableTokenGroups?: boolean;\n    i18nStringsTokenGroups?: I18nStringsTokenGroups;\n  };\n\nconst PropertyFilterInternal = React.forwardRef(\n  (\n    {\n      disabled,\n      countText,\n      query,\n      hideOperations,\n      onChange,\n      filteringProperties,\n      filteringOptions,\n      customGroupsText,\n      disableFreeTextFiltering,\n      freeTextFiltering,\n      onLoadItems,\n      virtualScroll,\n      customControl,\n      customFilterActions,\n      filteringPlaceholder,\n      filteringAriaLabel,\n      filteringEmpty,\n      filteringLoadingText,\n      filteringFinishedText,\n      filteringErrorText,\n      filteringRecoveryText,\n      filteringConstraintText,\n      filteringStatusType,\n      asyncProperties,\n      tokenLimit,\n      expandToViewport,\n      tokenLimitShowFewerAriaLabel,\n      tokenLimitShowMoreAriaLabel,\n      enableTokenGroups = false,\n      i18nStringsTokenGroups,\n      __internalRootRef,\n      ...rest\n    }: PropertyFilterInternalProps,\n    ref: React.Ref<Ref>\n  ) => {\n    const [nextFocusIndex, setNextFocusIndex] = useState<null | number>(null);\n    const onFocusMoved = () => setNextFocusIndex(null);\n    const tokenListRef = useListFocusController({\n      nextFocusIndex,\n      onFocusMoved,\n      listItemSelector: `.${tokenListStyles['list-item']}`,\n      showMoreSelector: `.${tokenListStyles.toggle}`,\n      outsideSelector: `.${styles.input}`,\n    });\n\n    const mergedRef = useMergeRefs(tokenListRef, __internalRootRef);\n    const inputRef = useRef<AutosuggestInputRef>(null);\n    const baseProps = getBaseProps(rest);\n\n    const i18nStrings = usePropertyFilterI18n({ ...rest.i18nStrings, ...i18nStringsTokenGroups });\n\n    useImperativeHandle(ref, () => ({ focus: () => inputRef.current?.focus() }), []);\n    const showResults = !!query.tokens?.length && !disabled && !!countText;\n    const [filteringText, setFilteringText] = useState<string>('');\n\n    const { internalProperties, internalOptions, internalQuery, internalFreeText } = (() => {\n      const propertyByKey = filteringProperties.reduce((acc, property) => {\n        const extendedOperators = (property?.operators ?? []).reduce(\n          (acc, operator) => (typeof operator === 'object' ? acc.set(operator.operator, operator) : acc),\n          new Map<PropertyFilterOperator, null | ExtendedOperator<any>>()\n        );\n        acc.set(property.key, {\n          propertyKey: property.key,\n          propertyLabel: property?.propertyLabel ?? '',\n          groupValuesLabel: property?.groupValuesLabel ?? '',\n          propertyGroup: property?.group,\n          operators: (property?.operators ?? []).map(op => (typeof op === 'string' ? op : op.operator)),\n          defaultOperator: property?.defaultOperator ?? '=',\n          getValueFormatter: operator => (operator ? extendedOperators.get(operator)?.format ?? null : null),\n          getValueFormRenderer: operator => (operator ? extendedOperators.get(operator)?.form ?? null : null),\n          externalProperty: property,\n        });\n        return acc;\n      }, new Map<string, InternalFilteringProperty>());\n      const getProperty = (propertyKey: string): null | InternalFilteringProperty =>\n        propertyByKey.get(propertyKey) ?? null;\n\n      const internalOptions: readonly InternalFilteringOption[] = filteringOptions.map(option => ({\n        property: getProperty(option.propertyKey),\n        value: option.value,\n        label: option.label ?? option.value ?? '',\n      }));\n\n      function transformToken(\n        tokenOrGroup: Token | TokenGroup,\n        standaloneIndex?: number\n      ): InternalToken | InternalTokenGroup {\n        return 'operation' in tokenOrGroup\n          ? {\n              operation: tokenOrGroup.operation,\n              tokens: tokenOrGroup.tokens.map(token => transformToken(token)),\n            }\n          : {\n              standaloneIndex,\n              property: tokenOrGroup.propertyKey ? getProperty(tokenOrGroup.propertyKey) : null,\n              operator: tokenOrGroup.operator,\n              value: tokenOrGroup.value,\n            };\n      }\n\n      const internalQuery: InternalQuery = {\n        operation: query.operation,\n        tokens: (enableTokenGroups && query.tokenGroups ? query.tokenGroups : query.tokens).map(transformToken),\n      };\n\n      const internalFreeText: InternalFreeTextFiltering = {\n        disabled: disableFreeTextFiltering,\n        operators: freeTextFiltering?.operators ?? [':', '!:'],\n        defaultOperator: freeTextFiltering?.defaultOperator ?? ':',\n      };\n\n      return { internalProperties: [...propertyByKey.values()], internalOptions, internalQuery, internalFreeText };\n    })();\n\n    const { addToken, updateToken, updateOperation, removeToken, removeAllTokens } = getQueryActions({\n      query: internalQuery,\n      filteringOptions: internalOptions,\n      onChange,\n      enableTokenGroups,\n    });\n\n    const parsedText = parseText(filteringText, internalProperties, internalFreeText);\n    const autosuggestOptions = getAutosuggestOptions(\n      parsedText,\n      internalProperties,\n      internalOptions,\n      customGroupsText,\n      i18nStrings\n    );\n\n    const createToken = (currentText: string) => {\n      const parsedText = parseText(currentText, internalProperties, internalFreeText);\n      let newToken: InternalToken;\n      switch (parsedText.step) {\n        case 'property': {\n          newToken = {\n            property: parsedText.property,\n            operator: parsedText.operator,\n            value: parsedText.value,\n          };\n          break;\n        }\n        case 'free-text': {\n          newToken = {\n            property: null,\n            operator: parsedText.operator || internalFreeText.defaultOperator,\n            value: parsedText.value,\n          };\n          break;\n        }\n        case 'operator': {\n          newToken = {\n            property: null,\n            operator: internalFreeText.defaultOperator,\n            value: currentText,\n          };\n          break;\n        }\n      }\n      if (internalFreeText.disabled && !newToken.property) {\n        return;\n      }\n      addToken(newToken);\n      setFilteringText('');\n    };\n    const getLoadMoreDetail = (parsedText: ParsedText, filteringText: string) => {\n      const loadMoreDetail: {\n        filteringProperty: FilteringProperty | undefined;\n        filteringText: string;\n        filteringOperator: ComparisonOperator | undefined;\n      } = {\n        filteringProperty: undefined,\n        filteringText,\n        filteringOperator: undefined,\n      };\n      if (parsedText.step === 'property') {\n        loadMoreDetail.filteringProperty = parsedText.property.externalProperty;\n        loadMoreDetail.filteringText = parsedText.value;\n        loadMoreDetail.filteringOperator = parsedText.operator;\n      }\n      return loadMoreDetail;\n    };\n    const loadMoreDetail = getLoadMoreDetail(parsedText, filteringText);\n    const inputLoadItemsHandlers = useLoadItems(\n      onLoadItems,\n      loadMoreDetail.filteringText,\n      loadMoreDetail.filteringProperty,\n      loadMoreDetail.filteringText,\n      loadMoreDetail.filteringOperator\n    );\n    const asyncProps = {\n      empty: filteringEmpty,\n      loadingText: filteringLoadingText,\n      finishedText: filteringFinishedText,\n      errorText: filteringErrorText,\n      recoveryText: filteringRecoveryText,\n      statusType: filteringStatusType,\n    };\n    const asyncAutosuggestProps =\n      !!filteringText.length || asyncProperties\n        ? {\n            ...inputLoadItemsHandlers,\n            ...asyncProps,\n          }\n        : {};\n    const handleSelected: PropertyFilterAutosuggestProps['onOptionClick'] = event => {\n      const { detail: option } = event;\n      const value = option.value || '';\n      if (!value) {\n        return;\n      }\n\n      if (!('keepOpenOnSelect' in option)) {\n        createToken(value);\n        return;\n      }\n\n      // stop dropdown from closing\n      event.preventDefault();\n\n      const parsedText = parseText(value, internalProperties, internalFreeText);\n      const loadMoreDetail = getLoadMoreDetail(parsedText, value);\n\n      // Insert operator automatically if only one operator is defined for the given property.\n      if (parsedText.step === 'operator') {\n        const operators = getAllowedOperators(parsedText.property);\n        if (value.trim() === parsedText.property.propertyLabel && operators.length === 1) {\n          loadMoreDetail.filteringProperty = parsedText.property.externalProperty ?? undefined;\n          loadMoreDetail.filteringOperator = operators[0];\n          loadMoreDetail.filteringText = '';\n          setFilteringText(parsedText.property.propertyLabel + ' ' + operators[0] + ' ');\n        }\n      }\n\n      fireNonCancelableEvent(onLoadItems, { ...loadMoreDetail, firstPage: true, samePage: false });\n    };\n\n    const operatorForm =\n      parsedText.step === 'property' && parsedText.property.getValueFormRenderer(parsedText.operator);\n\n    const searchResultsId = useUniqueId('property-filter-search-results');\n    const constraintTextId = useUniqueId('property-filter-constraint');\n    const textboxAriaDescribedBy = filteringConstraintText\n      ? joinStrings(rest.ariaDescribedby, constraintTextId)\n      : rest.ariaDescribedby;\n\n    return (\n      <div {...baseProps} className={clsx(baseProps.className, styles.root)} ref={mergedRef}>\n        <div className={clsx(styles['search-field'], analyticsSelectors['search-field'])}>\n          {customControl && <div className={styles['custom-control']}>{customControl}</div>}\n          <PropertyFilterAutosuggest\n            ref={inputRef}\n            virtualScroll={virtualScroll}\n            enteredTextLabel={i18nStrings.enteredTextLabel}\n            ariaLabel={filteringAriaLabel ?? i18nStrings.filteringAriaLabel}\n            placeholder={filteringPlaceholder ?? i18nStrings.filteringPlaceholder}\n            ariaLabelledby={rest.ariaLabelledby}\n            ariaDescribedby={textboxAriaDescribedBy}\n            controlId={rest.controlId}\n            value={filteringText}\n            disabled={disabled}\n            {...autosuggestOptions}\n            onChange={event => setFilteringText(event.detail.value)}\n            empty={filteringEmpty}\n            {...asyncAutosuggestProps}\n            expandToViewport={expandToViewport}\n            onOptionClick={handleSelected}\n            customForm={\n              operatorForm && (\n                <PropertyEditor\n                  property={parsedText.property}\n                  operator={parsedText.operator}\n                  filter={parsedText.value}\n                  operatorForm={operatorForm}\n                  i18nStrings={i18nStrings}\n                  onCancel={() => {\n                    setFilteringText('');\n                    inputRef.current?.close();\n                    inputRef.current?.focus({ preventDropdown: true });\n                  }}\n                  onSubmit={token => {\n                    addToken(token);\n                    setFilteringText('');\n                    inputRef.current?.focus({ preventDropdown: true });\n                    inputRef.current?.close();\n                  }}\n                />\n              )\n            }\n            hideEnteredTextOption={internalFreeText.disabled && parsedText.step !== 'property'}\n            clearAriaLabel={i18nStrings.clearAriaLabel}\n            searchResultsId={showResults ? searchResultsId : undefined}\n          />\n          {showResults ? (\n            <div className={styles.results}>\n              <SearchResults id={searchResultsId}>{countText}</SearchResults>\n            </div>\n          ) : null}\n        </div>\n        {filteringConstraintText && (\n          <div id={constraintTextId} className={styles.constraint}>\n            {filteringConstraintText}\n          </div>\n        )}\n        {internalQuery.tokens && internalQuery.tokens.length > 0 && (\n          <div className={styles.tokens}>\n            <InternalSpaceBetween size=\"xs\" direction=\"horizontal\">\n              <TokenList\n                alignment=\"inline\"\n                limit={tokenLimit}\n                items={internalQuery.tokens}\n                limitShowFewerAriaLabel={tokenLimitShowFewerAriaLabel}\n                limitShowMoreAriaLabel={tokenLimitShowMoreAriaLabel}\n                renderItem={(_, tokenIndex) => (\n                  <TokenButton\n                    query={internalQuery}\n                    tokenIndex={tokenIndex}\n                    onUpdateToken={(token, releasedTokens) => {\n                      updateToken(tokenIndex, token, releasedTokens);\n                    }}\n                    onUpdateOperation={updateOperation}\n                    onRemoveToken={() => {\n                      removeToken(tokenIndex);\n                      setNextFocusIndex(tokenIndex);\n                    }}\n                    filteringProperties={internalProperties}\n                    filteringOptions={internalOptions}\n                    asyncProps={asyncProps}\n                    onLoadItems={onLoadItems}\n                    i18nStrings={i18nStrings}\n                    asyncProperties={asyncProperties}\n                    hideOperations={hideOperations}\n                    customGroupsText={customGroupsText}\n                    freeTextFiltering={internalFreeText}\n                    disabled={disabled}\n                    expandToViewport={expandToViewport}\n                    enableTokenGroups={enableTokenGroups}\n                  />\n                )}\n                i18nStrings={{\n                  limitShowFewer: i18nStrings.tokenLimitShowFewer,\n                  limitShowMore: i18nStrings.tokenLimitShowMore,\n                }}\n                after={\n                  customFilterActions ? (\n                    <div className={styles['custom-filter-actions']}>{customFilterActions}</div>\n                  ) : (\n                    <span\n                      {...getAnalyticsMetadataAttribute({\n                        action: 'clearFilters',\n                      } as Partial<GeneratedAnalyticsMetadataPropertyFilterClearFilters>)}\n                    >\n                      <InternalButton\n                        formAction=\"none\"\n                        onClick={() => {\n                          removeAllTokens();\n                          inputRef.current?.focus({ preventDropdown: true });\n                        }}\n                        className={styles['remove-all']}\n                        disabled={disabled}\n                      >\n                        {i18nStrings.clearFiltersText}\n                      </InternalButton>\n                    </span>\n                  )\n                }\n              />\n            </InternalSpaceBetween>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nexport default PropertyFilterInternal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}