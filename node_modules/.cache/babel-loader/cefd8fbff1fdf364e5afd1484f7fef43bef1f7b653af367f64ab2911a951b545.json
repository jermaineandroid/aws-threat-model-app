{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { nodeContains } from '@cloudscape-design/component-toolkit/dom';\nimport { findUpUntil, isHTMLElement, isNode } from './dom';\n/**\n * Checks whether the given node (target) belongs to the container.\n * The function is similar to nodeContains but also accounts for dropdowns with expandToViewport=true.\n *\n * @param container Container node\n * @param target Node that is checked to be a descendant of the container\n */\nexport function nodeBelongs(container, target) {\n  var _a;\n  if (!isNode(target)) {\n    return false;\n  }\n  const portal = findUpUntil(target, node => node === container || isHTMLElement(node) && !!node.dataset.awsuiReferrerId);\n  if (portal && portal === container) {\n    // We found the container as a direct ancestor without a portal\n    return true;\n  }\n  const referrer = isHTMLElement(portal) ? document.getElementById((_a = portal.dataset.awsuiReferrerId) !== null && _a !== void 0 ? _a : '') : null;\n  return referrer ? nodeContains(container, referrer) : nodeContains(container, target);\n}","map":{"version":3,"names":["nodeContains","findUpUntil","isHTMLElement","isNode","nodeBelongs","container","target","portal","node","dataset","awsuiReferrerId","referrer","document","getElementById","_a"],"sources":["/home/jj/aws-threat-model-app/node_modules/src/internal/utils/node-belongs.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { nodeContains } from '@cloudscape-design/component-toolkit/dom';\n\nimport { findUpUntil, isHTMLElement, isNode } from './dom';\n\n/**\n * Checks whether the given node (target) belongs to the container.\n * The function is similar to nodeContains but also accounts for dropdowns with expandToViewport=true.\n *\n * @param container Container node\n * @param target Node that is checked to be a descendant of the container\n */\nexport function nodeBelongs(container: Node | null, target: Node | EventTarget | null): boolean {\n  if (!isNode(target)) {\n    return false;\n  }\n  const portal = findUpUntil(\n    target as HTMLElement,\n    node => node === container || (isHTMLElement(node) && !!node.dataset.awsuiReferrerId)\n  );\n  if (portal && portal === container) {\n    // We found the container as a direct ancestor without a portal\n    return true;\n  }\n  const referrer = isHTMLElement(portal) ? document.getElementById(portal.dataset.awsuiReferrerId ?? '') : null;\n  return referrer ? nodeContains(container, referrer) : nodeContains(container, target);\n}\n"],"mappings":"AAAA;AACA;AAEA,SAASA,YAAY,QAAQ,0CAA0C;AAEvE,SAASC,WAAW,EAAEC,aAAa,EAAEC,MAAM,QAAQ,OAAO;AAE1D;;;;;;;AAOA,OAAM,SAAUC,WAAWA,CAACC,SAAsB,EAAEC,MAAiC;;EACnF,IAAI,CAACH,MAAM,CAACG,MAAM,CAAC,EAAE;IACnB,OAAO,KAAK;;EAEd,MAAMC,MAAM,GAAGN,WAAW,CACxBK,MAAqB,EACrBE,IAAI,IAAIA,IAAI,KAAKH,SAAS,IAAKH,aAAa,CAACM,IAAI,CAAC,IAAI,CAAC,CAACA,IAAI,CAACC,OAAO,CAACC,eAAgB,CACtF;EACD,IAAIH,MAAM,IAAIA,MAAM,KAAKF,SAAS,EAAE;IAClC;IACA,OAAO,IAAI;;EAEb,MAAMM,QAAQ,GAAGT,aAAa,CAACK,MAAM,CAAC,GAAGK,QAAQ,CAACC,cAAc,CAAC,CAAAC,EAAA,GAAAP,MAAM,CAACE,OAAO,CAACC,eAAe,cAAAI,EAAA,cAAAA,EAAA,GAAI,EAAE,CAAC,GAAG,IAAI;EAC7G,OAAOH,QAAQ,GAAGX,YAAY,CAACK,SAAS,EAAEM,QAAQ,CAAC,GAAGX,YAAY,CAACK,SAAS,EAAEC,MAAM,CAAC;AACvF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}